{"remainingRequest":"C:\\Users\\Administrator\\WebstormProjects\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\WebstormProjects\\app\\src\\pages\\Detail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\WebstormProjects\\app\\src\\pages\\Detail\\index.vue","mtime":1647759235246},{"path":"C:\\Users\\Administrator\\WebstormProjects\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1647341553791},{"path":"C:\\Users\\Administrator\\WebstormProjects\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647341553526},{"path":"C:\\Users\\Administrator\\WebstormProjects\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1647341949719}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport ImageList from \"./ImageList/ImageList\";\r\nimport Zoom from \"./Zoom/Zoom\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n  data() {\r\n    return {\r\n      // 加入购物车的总产品数\r\n      SkuNum: 1,\r\n    };\r\n  },\r\n\r\n  components: {\r\n    ImageList,\r\n    Zoom,\r\n  },\r\n  // 路由挂载\r\n  mounted() {\r\n    // 派发action,获取产品的详情信息\r\n    this.$store.dispatch(\"getGoodInfo\", this.$route.params.skuid);\r\n  },\r\n  computed: {\r\n    // 辅助函数mapGetters\r\n    ...mapGetters([\"categoryView\", \"skuInfo\", \"spuSaleAttrList\"]),\r\n    // 给子组件的数据\r\n    skuImageList() {\r\n      // 如果服务器的数据没有回来，skuInfo这个对象是空对象\r\n      return this.skuInfo.skuImageList || [];\r\n    },\r\n  },\r\n  methods: {\r\n    // changeActive(a,b)\r\n    // {\r\n    //   console.log(a);\r\n    //   console.log(b);\r\n    // },\r\n\r\n    // 产品的售卖属性值切换高亮(排他思想)\r\n    changeActive(saleAttrValue, arr) {\r\n      // 遍历全部的售卖属性值isChecked\r\n      arr.forEach((item) => {\r\n        item.isChecked = 0;\r\n      });\r\n      // 点击的那个售卖属性值\r\n      saleAttrValue.isChecked = 1;\r\n    },\r\n    // 修改文本框的产品数量\r\n    changeSkuNum(event) {\r\n      //  用户输入进来的文本\r\n      let value = event.target.value * 1;\r\n      // 如果用户输入进来的值是非法的\r\n      if (isNaN(value) || value < 1) {\r\n        this.SkuNum = 1;\r\n      } else {\r\n        // 如果正常则输出(避免小数:parseInt)\r\n        this.SkuNum = parseInt(value);\r\n      }\r\n    },\r\n\r\n    // 加入购物车的回调函数\r\n    async addShopcar() {\r\n      // 1发请求--将产品加入到数据库（通知服务器）\r\n      // 2服务器存储成功，进行路由跳转，传递参数\r\n      // 3失败，给用户相应的提示\r\n      try {\r\n        let result = await this.$store.dispatch(\"addOrUpdateShopCart\", {\r\n          skuId: this.$route.params.skuid,\r\n          skuNum: this.SkuNum,\r\n        });\r\n        console.log(result);\r\n        // 进行路由跳转（还要将产品的信息传递过去）\r\n        // 下面的这种手段进行路由跳转并传递参数可以，但是会有问题，不采用\r\n        // this.$router.push({name:'AddCartSuccess',query:{skuInfo:this.skuInfo,skuNum:this.SkuNum}})\r\n        \r\n        // 会话存储\r\n        sessionStorage.setItem(\"SKUINFO\", JSON.stringify(this.skuInfo));\r\n        \r\n        this.$router.push({\r\n          name: \"AddCartSuccess\",\r\n          query: { skuNum: this.SkuNum },\r\n        });\r\n      } catch (err) {\r\n        alert(error.message);\r\n      }\r\n    },\r\n  },\r\n};\r\n",null]}