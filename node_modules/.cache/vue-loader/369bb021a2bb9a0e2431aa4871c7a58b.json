{"remainingRequest":"C:\\Users\\Administrator\\WebstormProjects\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\WebstormProjects\\app\\src\\pages\\Trade\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\WebstormProjects\\app\\src\\pages\\Trade\\index.vue","mtime":1648179180594},{"path":"C:\\Users\\Administrator\\WebstormProjects\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1647341553791},{"path":"C:\\Users\\Administrator\\WebstormProjects\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647341553526},{"path":"C:\\Users\\Administrator\\WebstormProjects\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1647341949719}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  name: \"Trade\",\r\n  data() {\r\n    return {\r\n      //手机买家的留言信息\r\n      msg: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    // 修改默认地址\r\n    changeDefault(address, addressInfo) {\r\n      // 全部的isDefault为零\r\n      addressInfo.forEach((item) => (item.isDefault = 0));\r\n      address.isDefault = 1;\r\n    },\r\n    // 提交订单\r\n    async submitOrder() {\r\n      // 交易编码\r\n      let { tradeNo } = this.orderInfo;\r\n      let data = {\r\n        consignee: this.userDefaultAddress.consignee, //最终收件人的名字\r\n        consigneeTel: this.userDefaultAddress.phoneNum, //最终收件人的手机号\r\n        deliveryAddress: this.userDefaultAddress.fullAddress, //最终收件人的地址\r\n        paymentWay: \"ONLINE\", //支付方式\r\n        orderComment: this.msg, //买家的留言信息\r\n        orderDetailList: this.orderInfo.detailArrayList, //商品清单\r\n      };\r\n      // 需要带参数的tradeNo\r\n      let result = await this.$API.reqSubmitOrder(tradeNo, data);\r\n      console.log(result);\r\n      //  提交订单成功\r\n      if (result.code == 200) {\r\n        this.orderId = result.data;\r\n        // 路由跳转,携带query参数\r\n        this.$router.push('/pay?orderId='+this.orderId);\r\n      } \r\n      // 提交订单失败\r\n      else {\r\n        alert(result.data);\r\n      }\r\n    },\r\n  },\r\n  // 生命周期函数：挂载完毕\r\n  mounted() {\r\n    this.$store.dispatch(\"getUserAddress\");\r\n    this.$store.dispatch(\"getOrderInfo\");\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      addressInfo: (state) => state.trade.address,\r\n      orderInfo: (state) => state.trade.orderInfo,\r\n    }),\r\n    //将来提交订单最终选中地址\r\n    userDefaultAddress() {\r\n      // find：查找数组中符合条件的元素返回，作为最终结果\r\n      return this.addressInfo.find((item) => item.isDefault == 1) || {};\r\n    },\r\n  },\r\n};\r\n",null]}